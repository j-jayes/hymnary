---
title: "Hymnary Organâ€“Hymnal Crossover"
subtitle: "Matching Allen organ hymns to their tunes and hymn book entries"
---

::: {.attribution-banner}
All hymn and tune data sourced from [Hymnary.org](https://hymnary.org/) â€” a service of the Calvin Institute of Christian Worship and the Christian Classics Ethereal Library.
:::

## About This Project

All Souls Anglican Church in Ballito has an **Allen organ** with built-in hymns selectable from the console controller display. This project identifies which of those hymns also appear in the church hymn book, so the music selector knows exactly which built-in accompaniments are available for each service.

### How It Works

1. **Organ hymn list** â€” We started with the 182 hymns programmed into the Allen organ's console controller.
2. **Tune lookup** â€” For each hymn, we searched [Hymnary.org](https://hymnary.org/) to find which tunes are associated with it â€” many hymns have multiple tune settings.
3. **Metadata collection** â€” For each tune, we collected the title, composer, meter, musical incipit, key, MIDI files, and other metadata.
4. **AI-powered filtering** â€” We used GPT-5.2 to classify each tune as genuinely relevant or a search false-positive, running 3 independent checks with majority voting for reliability.
5. **Hymn book matching** â€” We cross-referenced the organ tunes against the **Mission Praise** hymn book to find which organ hymns match entries in the church's book.

### Quick Stats

```{python}
#| echo: false
#| output: asis

import json
import pandas as pd
from pathlib import Path

filtered_path = Path("../data/processed/hymn_tune_index_filtered.json")
raw_path = Path("../data/processed/hymn_tune_index.json")
summary_csv_path = Path("../data/processed/summary_filtered.csv")

data_path = filtered_path if filtered_path.exists() else raw_path

n_hymns = "â€”"
n_unique_tunes = "â€”"
n_with_midi = "â€”"
n_matches = 0

if data_path and data_path.exists():
    hymn_data = json.loads(data_path.read_text())
    n_hymns = len(hymn_data)
    
    unique_slugs = set()
    midi_count = 0
    for h in hymn_data:
        for t in h.get("tunes_found", []):
            slug = t.get("tune_slug")
            if slug:
                unique_slugs.add(slug)
            if t.get("detail", {}).get("midi_url"):
                midi_count += 1
    n_unique_tunes = len(unique_slugs)
    n_with_midi = midi_count

if summary_csv_path.exists():
    try:
        df_match = pd.read_csv(summary_csv_path)
        if "in_hymn_book" in df_match.columns and "tune_slug" in df_match.columns:
             # Count unique tunes that are matched
            n_matches = df_match[df_match["in_hymn_book"] == True]["tune_slug"].nunique()
    except Exception:
        pass

print(f"""
::: {{.grid}}

::: {{.g-col-6 .g-col-md-3}}
::: {{.stat-card}}
[{n_hymns}]{{.stat-number}}
[Organ Hymns]{{.stat-label}}
:::
:::

::: {{.g-col-6 .g-col-md-3}}
::: {{.stat-card}}
[{n_unique_tunes}]{{.stat-number}}
[Unique Tunes]{{.stat-label}}
:::
:::

::: {{.g-col-6 .g-col-md-3}}
::: {{.stat-card}}
[{n_with_midi}]{{.stat-number}}
[MIDI Files]{{.stat-label}}
:::
:::

::: {{.g-col-6 .g-col-md-3}}
::: {{.stat-card}}
[{n_matches}]{{.stat-number}}
[Book Matches]{{.stat-label}}
:::
:::

:::

### Overlap Analysis

We cross-referenced the {n_unique_tunes} tunes found in the Organ console against the Mission Praise hymn book.

- **Organ Only**: {n_unique_tunes - n_matches} tunes are unique to the organ console.
- **Common Ground**: **{n_matches} tunes** appear in both the Organ and the Mission Praise book.
""")
```

## Browse the Data

Head to the **[Hymnâ€“Tune Index](hymns.qmd)** to explore the full list of organ hymns and their associated tunes, or see the **[About](about.qmd)** page for methodology details and full attribution.

```{python}
#| echo: false
#| output: asis

from pathlib import Path

if Path("hymn_tune_data.xlsx").exists():
    print("""
::: {.callout-tip}
## Download the Data
ðŸ“¥ **[Download full dataset as Excel](hymn_tune_data.xlsx)** â€” a tidy spreadsheet with all hymnâ€“tune data, AI relevance classification, MIDI links, and metadata. Perfect for sorting and filtering in Excel.
:::
""")
```
